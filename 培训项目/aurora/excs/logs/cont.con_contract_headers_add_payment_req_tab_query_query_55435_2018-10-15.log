2018-10-15 06:33:08.111 [aurora.application.session_check] [CONFIG] Session data copied to context
2018-10-15 06:33:08.111 [aurora.application.session_check] [CONFIG] Checking BM access cont.con_contract_headers_add_payment_req_tab_query for operation query
2018-10-15 06:33:08.113 [aurora.application.session_check] [CONFIG] Result from aurora.bm.DefaultAccessChecker@4fda8151 is true
2018-10-15 06:33:08.113 [uncertain.proc] [CONFIG] [action] AccessCheck
2018-10-15 06:33:08.114 [uncertain.proc] [CONFIG] [action] CheckServiceLock
2018-10-15 06:33:08.114 [uncertain.proc] [CONFIG] [action] ParseParameter
2018-10-15 06:33:08.114 [uncertain.proc] [CONFIG] [action] ValidateInput
2018-10-15 06:33:08.114 [uncertain.proc] [CONFIG] [action] InvokeService
2018-10-15 06:33:08.114 [aurora.database] [CONFIG] ===================================== prepare to run model-query cont.con_contract_headers_add_payment_req_tab_query==============================
2018-10-15 06:33:08.118 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2018-10-15 06:33:08.119 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2018-10-15 06:33:08.119 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2018-10-15 06:33:08.119 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2018-10-15 06:33:08.119 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2018-10-15 06:33:08.119 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2018-10-15 06:33:08.119 [uncertain.proc] [CONFIG] [action] ExecuteQuery
2018-10-15 06:33:08.119 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onExecuteQuery
2018-10-15 06:33:08.150 [uncertain.proc] [CONFIG] [action] QueryFinish
2018-10-15 06:33:08.150 [uncertain.proc] [FINE] aurora.database.features.AutoQueryCounter.onQueryFinish
2018-10-15 06:33:08.161 [uncertain.proc] [CONFIG] [action] FetchResultSet
2018-10-15 06:33:08.161 [uncertain.proc] [FINE] aurora.database.features.CacheBasedLookUpField.postFetchResultSet
2018-10-15 06:33:08.161 [aurora.database] [CONFIG] 
============= BEGIN [query] SQL Statement execution dump ============

            	SELECT *
  FROM (SELECT cprh.requisition_number,
               cprh.payment_requisition_header_id,
               cprh.employee_id,
               (SELECT ee.name || '-' || ee.employee_code
                  FROM exp_employees ee
                 WHERE ee.employee_id = cprh.employee_id) requisitor,
               to_char(cprh.requisition_date, 'YYYY-MM-DD') requisition_date,
               cprh.currency_code,
               (SELECT SUM(b.amount)
                  FROM csh_payment_requisition_lns b, con_document_flows a
                 WHERE a.document_type = 'CON_CONTRACT'
                   AND a.source_document_type = 'CSH_PAYMENT_REQUISITION_LNS'
                   AND a.document_id =  ?
                   AND a.source_document_line_id =
                       b.payment_requisition_line_id
                   AND b.payment_requisition_header_id =
                       cprh.payment_requisition_header_id) amount,
               cprh.partner_category,
               (SELECT b.code_value_name
                  FROM sys_codes_vl a, sys_code_values_vl b
                 WHERE a.code_id = b.code_id
                   AND a.code = 'PAYMENT_OBJECT'
                   AND b.code_value = cprl.partner_category) p_partner_category,
               cprh.partner_id,
               decode(cprl.partner_category,
                      'EMPLOYEE',
                      (SELECT ee.employee_code || '-' || ee.name
                         FROM exp_employees ee
                        WHERE ee.employee_id = cprl.partner_id),
                      'VENDER',
                      (SELECT svv.vender_code || '-' || svv.description
                         FROM pur_system_venders_vl svv
                        WHERE svv.vender_id = cprl.partner_id),
                      'CUSTOMER',
                      (SELECT scv.customer_code || '-' || scv.description
                         FROM ord_system_customers_vl scv
                        WHERE scv.customer_id = cprl.partner_id)) payee_name,
               cprh.description,
               (SELECT SUM(b.amount)
                  FROM csh_payment_requisition_lns  a,
                       csh_payment_requisition_refs b
                 WHERE a.payment_requisition_line_id =
                       b.payment_requisition_line_id
                   AND a.payment_requisition_header_id =
                       cprh.payment_requisition_header_id) line_sum_amount,
               
               cprh.amount sum_amount, --modify 20130227 总金额取单据头金额
               (SELECT v.description
                  FROM csh_payment_methods_vl v
                 WHERE v.payment_method_id = cprh.payment_method_id) payment_method
          FROM csh_payment_requisition_hds cprh,csh_payment_requisition_lns cprl
         WHERE cprh.company_id =   ?
           AND cprh.payment_requisition_header_id = cprl.payment_requisition_header_id
           AND EXISTS
         (SELECT 1
                  FROM con_document_flows a
                 WHERE a.document_type = 'CON_CONTRACT'
                   AND a.source_document_type = 'CSH_PAYMENT_REQUISITION_LNS'
                   AND a.document_id =  ?
                   AND a.source_document_line_id = cprl.payment_requisition_line_id
                   AND cprh.payment_requisition_header_id =
                       a.source_document_id)) v
            	
            
---------------------Binding info---------------------
No.1	Access path:/parameter/@contract_header_id	Data type of passed value :java.lang.String	Value:3	Output:false	Database Type:null	
No.2	Access path:/session/@company_id	Data type of passed value :java.lang.String	Value:2240	Output:false	Database Type:null	
No.3	Access path:/parameter/@contract_header_id	Data type of passed value :java.lang.String	Value:3	Output:false	Database Type:null	

=============== END [query] SQL Statement execution dump ============

2018-10-15 06:33:08.161 [uncertain.proc] [CONFIG] [action] CreateSuccessResponse
