2018-10-19 06:53:03.796 [aurora.application.session_check] [CONFIG] Session data copied to context
2018-10-19 06:53:03.797 [aurora.application.session_check] [CONFIG] Checking BM access expm.exp_report_query_req_query_control for operation query
2018-10-19 06:53:03.798 [aurora.application.session_check] [CONFIG] Result from aurora.bm.DefaultAccessChecker@5b0119a3 is true
2018-10-19 06:53:03.798 [uncertain.proc] [CONFIG] [action] AccessCheck
2018-10-19 06:53:03.799 [uncertain.proc] [CONFIG] [action] CheckServiceLock
2018-10-19 06:53:03.799 [uncertain.proc] [CONFIG] [action] ParseParameter
2018-10-19 06:53:03.799 [uncertain.proc] [CONFIG] [action] ValidateInput
2018-10-19 06:53:03.799 [uncertain.proc] [CONFIG] [action] InvokeService
2018-10-19 06:53:03.800 [aurora.database] [CONFIG] ===================================== prepare to run model-query expm.exp_report_query_req_query_control==============================
2018-10-19 06:53:03.804 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2018-10-19 06:53:03.804 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2018-10-19 06:53:03.804 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2018-10-19 06:53:03.804 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2018-10-19 06:53:03.804 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2018-10-19 06:53:03.804 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2018-10-19 06:53:03.804 [uncertain.proc] [CONFIG] [action] ExecuteQuery
2018-10-19 06:53:03.804 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onExecuteQuery
2018-10-19 06:53:03.806 [uncertain.proc] [CONFIG] [action] QueryFinish
2018-10-19 06:53:03.806 [uncertain.proc] [FINE] aurora.database.features.AutoQueryCounter.onQueryFinish
2018-10-19 06:53:03.807 [uncertain.proc] [CONFIG] [action] FetchResultSet
2018-10-19 06:53:03.807 [uncertain.proc] [FINE] aurora.database.features.CacheBasedLookUpField.postFetchResultSet
2018-10-19 06:53:03.807 [aurora.database] [CONFIG] 
============= BEGIN [query] SQL Statement execution dump ============
 
            	SELECT * FROM (
				   select s.exp_report_header_id,
				   (select cch.contract_number
				  from con_contract_headers cch,con_document_flows s
				 where contract_header_id =s.document_id
				 and s.document_type='CON_CONTRACT_HEADERS'
				 and s.source_document_type ='EXP_REPORT_HEADERS'
				            and  s.source_document_id =s.exp_report_header_id) contact_number,
				       s.exp_report_number exp_requisition_number,
				       s.employee_id,
				       s.audit_flag,
				       to_char(s.audit_date,'yyyy-mm-dd') audit_date,
				       (select employee_code
				          from exp_employees es
				         where es.employee_id = s.employee_id) employee_code,
				       (select name
				          from exp_employees es
				         where es.employee_id = s.employee_id) employee_name,
				       s.payee_category,
				       (  select code_value_name
				    from sys_code_values_vl b, sys_codes a
				   where b.code_id = a.code_id
				     and a.code = 'PAYMENT_OBJECT'
				     and code_value=s.payee_category) payee_category_name,
				       s.payee_id,
				       decode (s.PAYEE_CATEGORY,'EMPLOYEE' ,
				       (select employee_code||'-'|| name from  exp_employees ee where ee.employee_id=s.payee_id),
				       'CUSTOMER',
				       (select vc.CUSTOMER_CODE||'-'||vc.DESCRIPTION from ord_system_customers_vl vc where vc.CUSTOMER_ID=s.payee_id ),
				       ( select vv.VENDER_CODE||'-'||vv.DESCRIPTION from pur_system_venders_vl vv where vv.VENDER_ID=s.payee_id ))  payee_name,
				       s.currency_code,
				       s.exchange_rate_type,
				       s.exchange_rate_quotation,
				       (select sum(t.report_amount)
				          from exp_report_lines t
				         where t.exp_report_header_id = s.exp_report_header_id) QUARTER_NUM,
				       (select sum(t.report_functional_amount)
				          from exp_report_lines t
				         where t.exp_report_header_id = s.exp_report_header_id) QUARTER_NUM_FUN,
				       s.period_name,
				       
				       s.je_creation_status,
				       s.gld_interface_flag,
				       s.created_by,       s.last_updated_by,
				       s.last_update_date,
				       to_char(s.report_date, 'YYYY-MM-DD') REQUISITION_DATE,
				       s.exp_report_type_id exp_requisition_type_id,
				       (select erpv.DESCRIPTION
				          from exp_expense_report_types_vl erpv
				         where erpv.expense_report_type_id = s.exp_report_type_id) type_description,
				       (select erpv.EXPENSE_REQUISITION_TYPE_CODE
				          from exp_expense_req_types_vl erpv
				         where erpv.EXPENSE_REQUISITION_TYPE_ID = s.exp_report_type_id) TYPE_CODE,
				       s.description,
				       s.report_status requisition_status_value,
				       (select b.code_value_name
				          from sys_codes_vl a, sys_code_values_vl b
				         where a.code_id = b.code_id
				           and a.code = 'EXP_EXPENSE_REPORT_STATUS'
				           and b.code_value = s.report_status) REQUISITION_STATUS,
				           s.CREATION_DATE,
				            to_char(S.CREATION_DATE,'yyyy-mm-dd')  CREATION_DATE1,
				               (SELECT NVL(SUM(W.CSH_WRITE_OFF_AMOUNT), 0)
												  FROM CSH_WRITE_OFF W
												 WHERE W.DOCUMENT_SOURCE = 'EXPENSE_REPORT'
												   AND W.DOCUMENT_HEADER_ID =
													   s.EXP_REPORT_HEADER_ID
												   ) PAYED_AMOUNT,
												   (  
				  select sum(erps.due_amount) from exp_report_pmt_schedules  erps 
				  where erps.exp_report_header_id=s.exp_report_header_id)-(SELECT NVL(SUM(W.CSH_WRITE_OFF_AMOUNT), 0)
												  FROM CSH_WRITE_OFF W
												 WHERE W.DOCUMENT_SOURCE = 'EXPENSE_REPORT'
												   AND W.DOCUMENT_HEADER_ID =
													   s.EXP_REPORT_HEADER_ID
												   )  UNPAYMENT_AMOUNT
				  from exp_report_headers s
				  ORDER BY exp_report_header_id desc)
						 WHERE exists ( select 1 from exp_requisition_release  err where err.document_type='EXP_REPORT' and  err.exp_requisition_header_id=? and  err.document_id=exp_report_header_id ) 
		
---------------------Binding info---------------------
No.1	Access path:@head_id	Data type of passed value :java.lang.Long	Value:1935	Output:false	Database Type:null	

=============== END [query] SQL Statement execution dump ============

2018-10-19 06:53:03.807 [uncertain.proc] [CONFIG] [action] CreateSuccessResponse
