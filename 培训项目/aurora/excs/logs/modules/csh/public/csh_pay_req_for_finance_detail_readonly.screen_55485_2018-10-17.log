2018-10-17 01:49:15.942 [aurora.application.session_check] [CONFIG] Session data copied to context
2018-10-17 01:49:15.942 [aurora.application.session_check] [CONFIG] Access check result for modules/csh/public/csh_pay_req_for_finance_detail_readonly.screen => success
2018-10-17 01:49:15.943 [uncertain.proc] [CONFIG] [action] AccessCheck
2018-10-17 01:49:15.951 [uncertain.proc] [CONFIG] [action] InitService
2018-10-17 01:49:15.951 [uncertain.proc] [CONFIG] [action] ParseParameter
2018-10-17 01:49:15.951 [uncertain.proc] [CONFIG] [action] CreateModel
2018-10-17 01:49:15.951 [aurora.database] [CONFIG] ===================================== prepare to run model-query csh.csh_pay_req_attachment==============================
2018-10-17 01:49:15.955 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2018-10-17 01:49:15.955 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2018-10-17 01:49:15.955 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2018-10-17 01:49:15.955 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2018-10-17 01:49:15.955 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2018-10-17 01:49:15.955 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2018-10-17 01:49:15.955 [uncertain.proc] [CONFIG] [action] ExecuteQuery
2018-10-17 01:49:15.955 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onExecuteQuery
2018-10-17 01:49:15.956 [uncertain.proc] [CONFIG] [action] QueryFinish
2018-10-17 01:49:15.956 [uncertain.proc] [FINE] aurora.database.features.AutoQueryCounter.onQueryFinish
2018-10-17 01:49:15.956 [uncertain.proc] [CONFIG] [action] FetchResultSet
2018-10-17 01:49:15.956 [uncertain.proc] [FINE] aurora.database.features.CacheBasedLookUpField.postFetchResultSet
2018-10-17 01:49:15.956 [aurora.database] [CONFIG] 
============= BEGIN [query] SQL Statement execution dump ============

                SELECT
                    COUNT(1) AS atm_count
                FROM
                    fnd_atm_attachment_multi f
                WHERE
                    f.table_name = 'CSH_PAYMENT_REQUISITION_HDS'
                    and f.table_pk_value = nvl(?,?)
            
---------------------Binding info---------------------
No.1	Access path:@payment_requisition_header_id	Data type of passed value :java.lang.String	Value:853	Output:false	Database Type:null	
No.2	Access path:/parameter/@head_id	Data type of passed value :[null]	Value:null	Output:false	Database Type:null	

=============== END [query] SQL Statement execution dump ============

2018-10-17 01:49:15.956 [aurora.database] [CONFIG] ===================================== prepare to run model-query csh.csh_pay_req_init_emp_list==============================
2018-10-17 01:49:15.959 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2018-10-17 01:49:15.959 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2018-10-17 01:49:15.959 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2018-10-17 01:49:15.959 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2018-10-17 01:49:15.959 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2018-10-17 01:49:15.959 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2018-10-17 01:49:15.959 [uncertain.proc] [CONFIG] [action] ExecuteQuery
2018-10-17 01:49:15.959 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onExecuteQuery
2018-10-17 01:49:15.990 [uncertain.proc] [CONFIG] [action] QueryFinish
2018-10-17 01:49:15.991 [uncertain.proc] [FINE] aurora.database.features.AutoQueryCounter.onQueryFinish
2018-10-17 01:49:15.991 [uncertain.proc] [CONFIG] [action] FetchResultSet
2018-10-17 01:49:15.991 [uncertain.proc] [FINE] aurora.database.features.CacheBasedLookUpField.postFetchResultSet
2018-10-17 01:49:15.991 [aurora.database] [CONFIG] 
============= BEGIN [query] SQL Statement execution dump ============

                SELECT
                    ee.employee_id,
                    ee.employee_code,
                    ee.name,
                    ee.name
                    || '-'
                    || ee.employee_code name_code
                FROM
                    exp_employees ee,
                    (SELECT
                        eea.employee_id
                    FROM
                        exp_employee_assigns_v eea
                    WHERE
                        eea.employee_enabled_flag = 'Y' AND
                        eea.company_id           IN
                        (SELECT
                            fc.company_id
                        FROM
                            fnd_companies fc START
                        WITH fc.parent_company_id = ? CONNECT BY fc.parent_company_id = prior fc.company_id
                        UNION
                        SELECT to_number(?) AS company_id FROM dual
                        )
                    GROUP BY
                        eea.employee_id
                    ) e
                WHERE
                    ee.employee_id = e.employee_id
                ORDER BY
                    ee.employee_code
            
---------------------Binding info---------------------
No.1	Access path:/session/@company_id	Data type of passed value :java.lang.Integer	Value:835	Output:false	Database Type:null	
No.2	Access path:/session/@company_id	Data type of passed value :java.lang.Integer	Value:835	Output:false	Database Type:null	

=============== END [query] SQL Statement execution dump ============

2018-10-17 01:49:15.991 [aurora.database] [CONFIG] ===================================== prepare to run model-query csh.csh_transaction_classes_vl==============================
2018-10-17 01:49:15.995 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2018-10-17 01:49:15.995 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2018-10-17 01:49:15.995 [uncertain.proc] [CONFIG] [action] CreatequeryStatement
2018-10-17 01:49:15.995 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onCreateQueryStatement
2018-10-17 01:49:15.995 [uncertain.proc] [CONFIG] [action] PopulatequeryStatement
2018-10-17 01:49:15.995 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateQueryStatement
2018-10-17 01:49:15.995 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateQueryStatement
2018-10-17 01:49:15.995 [uncertain.proc] [CONFIG] [action] CreatequerySql
2018-10-17 01:49:15.995 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onCreateQuerySql
2018-10-17 01:49:15.995 [uncertain.proc] [CONFIG] [action] ExecuteQuery
2018-10-17 01:49:15.995 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onExecuteQuery
2018-10-17 01:49:15.996 [uncertain.proc] [CONFIG] [action] QueryFinish
2018-10-17 01:49:15.996 [uncertain.proc] [FINE] aurora.database.features.AutoQueryCounter.onQueryFinish
2018-10-17 01:49:15.996 [uncertain.proc] [CONFIG] [action] FetchResultSet
2018-10-17 01:49:15.996 [uncertain.proc] [FINE] aurora.database.features.CacheBasedLookUpField.postFetchResultSet
2018-10-17 01:49:15.996 [aurora.database] [CONFIG] 
============= BEGIN [query] SQL Statement execution dump ============
SELECT t1.CSH_TRANSACTION_TYPE_CODE,t1.CSH_TRANSACTION_CLASS_CODE,t1.DESCRIPTION,t1.ENABLED_WRITE_OFF_FLAG,t1.ENABLED_FLAG
FROM CSH_TRANSACTION_CLASSES_VL t1
WHERE csh_transaction_type_code = 'PREPAYMENT' and enabled_flag = 'Y'
ORDER BY csh_transaction_class_code
---------------------Binding info---------------------
null
=============== END [query] SQL Statement execution dump ============

2018-10-17 01:49:15.996 [aurora.database] [CONFIG] ===================================== prepare to run model-query csh.csh_payment_req_head_img_init==============================
2018-10-17 01:49:15.999 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2018-10-17 01:49:15.999 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2018-10-17 01:49:15.999 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2018-10-17 01:49:15.999 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2018-10-17 01:49:15.999 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2018-10-17 01:49:15.999 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2018-10-17 01:49:15.999 [uncertain.proc] [CONFIG] [action] ExecuteQuery
2018-10-17 01:49:15.999 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onExecuteQuery
2018-10-17 01:49:16.1 [uncertain.proc] [CONFIG] [action] QueryFinish
2018-10-17 01:49:16.1 [uncertain.proc] [FINE] aurora.database.features.AutoQueryCounter.onQueryFinish
2018-10-17 01:49:16.1 [uncertain.proc] [CONFIG] [action] FetchResultSet
2018-10-17 01:49:16.1 [uncertain.proc] [FINE] aurora.database.features.CacheBasedLookUpField.postFetchResultSet
2018-10-17 01:49:16.1 [aurora.database] [CONFIG] 
============= BEGIN [query] SQL Statement execution dump ============

                SELECT
                    h.payment_requisition_header_id,
                    h.requisition_number,
                    (SELECT sys_parameter_pkg.value('CUX_SYS_IMAGE_URL') FROM dual
                    ) AS cux_sys_image_url,
                    (SELECT sys_parameter_pkg.value('CUX_SYS_IMAGE_QUERY_URL') FROM dual
                    ) AS cux_sys_image_query_url,
                    (SELECT sys_parameter_pkg.value('CUX_SYS_IMAGE_BUSTYPE') FROM dual
                    ) AS cux_sys_image_bustype,
                    (SELECT sys_parameter_pkg.value('CUX_SYS_IMAGE_BUSNO') FROM dual
                    ) AS cux_sys_image_busno,
                    (SELECT
                        ee.employee_code
                    FROM
                        exp_employees ee
                    WHERE
                        ee.employee_id = h.employee_id
                    ) employee_code,
                    (SELECT u.unit_code FROM exp_org_unit_vl u WHERE u.unit_id = h.unit_id
                    ) unit_code,
                    (SELECT
                        cux_document_image_pkg.get_document_image_count('PAY_REQ', h.payment_requisition_header_id)
                    FROM
                        dual
                    ) image_count
                FROM
                    csh_payment_requisition_hds h
                     WHERE h.payment_requisition_header_id = ?
            
---------------------Binding info---------------------
No.1	Access path:/parameter/@payment_requisition_header_id	Data type of passed value :java.lang.String	Value:853	Output:false	Database Type:null	

=============== END [query] SQL Statement execution dump ============

2018-10-17 01:49:16.1 [aurora.database] [CONFIG] ===================================== prepare to run model-query csh.csh_pay_req_update_init_header==============================
2018-10-17 01:49:16.4 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2018-10-17 01:49:16.5 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2018-10-17 01:49:16.5 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2018-10-17 01:49:16.5 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2018-10-17 01:49:16.5 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2018-10-17 01:49:16.5 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2018-10-17 01:49:16.5 [uncertain.proc] [CONFIG] [action] ExecuteQuery
2018-10-17 01:49:16.5 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onExecuteQuery
2018-10-17 01:49:16.10 [uncertain.proc] [CONFIG] [action] QueryFinish
2018-10-17 01:49:16.10 [uncertain.proc] [FINE] aurora.database.features.AutoQueryCounter.onQueryFinish
2018-10-17 01:49:16.10 [uncertain.proc] [CONFIG] [action] FetchResultSet
2018-10-17 01:49:16.10 [uncertain.proc] [FINE] aurora.database.features.CacheBasedLookUpField.postFetchResultSet
2018-10-17 01:49:16.10 [aurora.database] [CONFIG] 
============= BEGIN [query] SQL Statement execution dump ============

                SELECT
                    v.*,
                    (SELECT
                        name
                    FROM
                        (SELECT
                            employee_id id,
                            employee_code code,
                            name,
                            partner_category
                        FROM
                            (SELECT
                                cev.employee_id,
                                cev.name
                                || '-'
                                || cev.employee_code name,
                                cev.employee_code,
                                'EMPLOYEE' partner_category
                            FROM
                                exp_company_employees_v cev
                            WHERE
                                cev.employee_enabled_flag = 'Y' AND
                                cev.company_id            = ?
                            UNION
                            SELECT
                                svv.vender_id,
                                svv.description
                                || '-'
                                || svv.vender_code,
                                svv.vender_code,
                                'VENDER' partner_category
                            FROM
                                pur_company_venders cv,
                                pur_system_venders_vl svv
                            WHERE
                                cv.company_id   = ? AND
                                cv.vender_id    = svv.vender_id AND
                                cv.enabled_flag = 'Y'
                            UNION
                            SELECT
                                cv.customer_id,
                                cv.description
                                || '-'
                                || cv.customer_code,
                                cv.customer_code,
                                'CUSTOMER' partner_category
                            FROM
                                ord_company_customers cc,
                                ord_system_customers_vl cv
                            WHERE
                                cc.company_id   = ? AND
                                cc.customer_id  = cv.customer_id AND
                                cc.enabled_flag = 'Y'
                            ) cat
                        )
                    WHERE
                        partner_category = v.partner_category AND
                        id               = v.partner_id
                    ) p_partner_name,
                    (SELECT
                        b.code_value_name
                    FROM
                        sys_codes_vl a,
                        sys_code_values_vl b
                    WHERE
                        a.code_id    = b.code_id AND
                        a.code       = 'PAYMENT_REQUISITION_STATUS' AND
                        b.code_value = v.p_status
                    ) status_name ,
                    (SELECT
                        COUNT(flw.document_id) cont
                    FROM
                        con_document_flows flw
                    WHERE
                        flw.document_type        ='CON_CONTRACT' AND
                        flw.source_document_type ='CSH_PAYMENT_REQUISITION_LNS' AND
                        flw.source_document_id   = ?
                    ) cont_flag,
                    sys_parameter_pkg.value('CSH_PREQ_APPROVE_WORKFLOW_ENABLED',?,?,?) AS approve_with_req_flag
                FROM
                    (SELECT
                        cprh.employee_id,
                        (SELECT
                            employee_code
                            ||'-'
                            ||name
                        FROM
                            exp_employees ee
                        WHERE
                            ee.employee_id = cprh.employee_id
                        ) employee_id_display,
                        (SELECT
                            name
                        FROM
                            exp_employees ee
                        WHERE
                            ee.employee_id =
                            (SELECT employee_id FROM sys_user su WHERE su.user_id = cprh.created_by
                            )
                        ) payment_requisition_create_by,
                        TO_CHAR(cprh.requisition_date, 'YYYY-MM-DD') requisition_date,
                        cprh.currency_code,
                        gld.currency_name,
                        gld.currency_name AS currency_code_display,
                        cprh.requisition_number,
                        cprh.partner_category,
                        (SELECT
                            code_value_name
                        FROM
                            sys_codes sc,
                            sys_code_values_vl scvv
                        WHERE
                            scvv.code_id    = sc.code_id AND
                            sc.code         = 'PAYMENT_OBJECT' AND
                            scvv.code_value = cprh.partner_category
                        ) partner_category_display,
                        cprh.partner_id,
                        cprh.amount,
                        cprh.payment_method_id,
                        (SELECT
                            description
                        FROM
                            CSH_PAYMENT_METHODS_VL cpmv
                        WHERE
                            cpmv.payment_method_id = cprh.payment_method_id
                        ) payment_method_id_display,
                        cprh.description,
                        cprh.operation_unit_id,
                        cprh.payment_requisition_header_id,
                        cprh.position_id,
                        (SELECT
                            description
                        FROM
                            exp_org_position_vl eopv
                        WHERE
                            eopv.position_id = cprh.position_id
                        ) position_id_display,
                        (SELECT
                            (t.description
                            ||'-'
                            ||t.position_code) parent_pos_desc
                        FROM
                            exp_org_position_vl t
                        WHERE
                            t.enabled_flag ='Y' AND
                            t.position_id  = cprh.position_id AND
                            t.company_id   = cprh.company_id
                        ) pos_desc ,
                        (SELECT
                            (t.description
                            ||'-'
                            ||t.position_code) parent_pos_desc
                        FROM
                            exp_org_position_vl t ,
                            exp_employee_assigns_v emp
                        WHERE
                            t.enabled_flag            ='Y' AND
                            t.position_id             = emp.position_id AND
                            t.company_id              = cprh.company_id AND
                            emp.employee_id           = cprh.employee_id AND
                            emp.primary_position_flag = 'Y' AND
                            emp.assign_enabled_flag   = 'Y' AND
                            emp.employee_enabled_flag = 'Y'
                        ) parent_pos_desc ,
                        cprh.status p_status,
                        cprh.payment_req_type_id ,
                        (SELECT
                            description
                        FROM
                            csh_pay_req_types_vl cprt
                        WHERE
                            cprt.type_id = cprh.payment_req_type_id
                        ) AS csh_type_id_display,
                        (SELECT
                            cprt.report_name
                        FROM
                            csh_pay_req_types cprt
                        WHERE
                            cprt.type_id = cprh.payment_req_type_id
                        ) report_name,
                        (SELECT
                            sr.param_name
                        FROM
                            csh_pay_req_types cprt,
                            sys_reports sr
                        WHERE
                            cprt.report_name = sr.report_name AND
                            cprt.type_id     = cprh.payment_req_type_id AND
                            rownum           = 1
                        ) report_param_name,
                        cprh.source_type,
                        cprh.attachment_num payment_requisition_attach_id,
                        exp_payee_account_util_pkg.get_default_bank_code(cprh.partner_category,cprh.partner_id) AS bank_code,
                        exp_payee_account_util_pkg.get_default_bank_name(cprh.partner_category,cprh.partner_id) AS bank_name,
                        exp_payee_account_util_pkg.get_default_bank_location_code(cprh.partner_category,cprh.partner_id) AS bank_location_code,
                        exp_payee_account_util_pkg.get_default_bank_location(cprh.partner_category,cprh.partner_id) AS bank_location_name,
                        exp_payee_account_util_pkg.get_default_province_code(cprh.partner_category,cprh.partner_id) AS province_code,
                        exp_payee_account_util_pkg.get_default_province_name(cprh.partner_category,cprh.partner_id) AS province_name,
                        exp_payee_account_util_pkg.get_default_city_code(cprh.partner_category,cprh.partner_id) AS city_code,
                        exp_payee_account_util_pkg.get_default_city_name(cprh.partner_category,cprh.partner_id) AS city_name,
                        exp_payee_account_util_pkg.get_default_account_number(cprh.partner_category,cprh.partner_id) AS account_number,
                        exp_payee_account_util_pkg.get_default_account_name(cprh.partner_category,cprh.partner_id) AS account_name,
                        exp_payee_account_util_pkg.get_default_notes(cprh.partner_category,cprh.partner_id) AS notes,
                        cprh.related_transactions,
                        (SELECT
                            fv.description
                        FROM
                            fnd_dimension_values_vl fv,
                            fnd_dimensions_vl fd
                        WHERE
                            fv.dimension_value_code = cprh.related_transactions AND
                            fd.dimension_id         = fv.dimension_id AND
                            fd.dimension_code       = 'RELATED_TRANS'
                        ) related_transactions_desc
                    FROM
                        csh_payment_requisition_hds cprh,
                        gld_currency_vl gld
                    WHERE
                        cprh.payment_requisition_header_id = ? AND
                        gld.currency_code(+)               =cprh.currency_code
                    ) v
            
---------------------Binding info---------------------
No.1	Access path:/session/@company_id	Data type of passed value :java.lang.Integer	Value:835	Output:false	Database Type:null	
No.2	Access path:/session/@company_id	Data type of passed value :java.lang.Integer	Value:835	Output:false	Database Type:null	
No.3	Access path:/session/@company_id	Data type of passed value :java.lang.Integer	Value:835	Output:false	Database Type:null	
No.4	Access path:/parameter/@payment_requisition_header_id	Data type of passed value :java.lang.String	Value:853	Output:false	Database Type:null	
No.5	Access path:/session/@user_id	Data type of passed value :java.lang.Long	Value:1	Output:false	Database Type:null	
No.6	Access path:/session/@role_id	Data type of passed value :java.lang.Integer	Value:1	Output:false	Database Type:null	
No.7	Access path:/session/@company_id	Data type of passed value :java.lang.Integer	Value:835	Output:false	Database Type:null	
No.8	Access path:/parameter/@payment_requisition_header_id	Data type of passed value :java.lang.String	Value:853	Output:false	Database Type:null	

=============== END [query] SQL Statement execution dump ============

2018-10-17 01:49:16.11 [aurora.database] [CONFIG] ===================================== prepare to run model-query csh.csh_pay_req_line_query==============================
2018-10-17 01:49:16.14 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2018-10-17 01:49:16.14 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2018-10-17 01:49:16.14 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2018-10-17 01:49:16.15 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2018-10-17 01:49:16.15 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2018-10-17 01:49:16.15 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2018-10-17 01:49:16.15 [uncertain.proc] [CONFIG] [action] ExecuteQuery
2018-10-17 01:49:16.15 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onExecuteQuery
2018-10-17 01:49:16.20 [uncertain.proc] [CONFIG] [action] QueryFinish
2018-10-17 01:49:16.20 [uncertain.proc] [FINE] aurora.database.features.AutoQueryCounter.onQueryFinish
2018-10-17 01:49:16.20 [uncertain.proc] [CONFIG] [action] FetchResultSet
2018-10-17 01:49:16.20 [uncertain.proc] [FINE] aurora.database.features.CacheBasedLookUpField.postFetchResultSet
2018-10-17 01:49:16.20 [aurora.database] [CONFIG] 
============= BEGIN [query] SQL Statement execution dump ============

                SELECT
                    v.*,
                    DECODE(payment_requisition_line_type, 'EXP_REQUISITION', requisition_need_pay_amount - requisited_amount, NULL) need_payment_amount,
                    DECODE(payment_requisition_line_type, 'EXP_REQUISITION', requisited_amount - requisited_payment_amount, NULL) requisited_unpayment_amount,
                    (SELECT
                        cch.contract_number
                    FROM
                        con_contract_headers cch
                    WHERE
                        cch.contract_header_id = v.contract_header_id
                    ) contract_number,
                    (SELECT
                        conl.payment_schedule_line_id
                    FROM
                        con_payment_schedules conl
                    WHERE
                        conl.payment_schedule_line_id = v.contract_l_id
                    ) payment_schedule_line_id,
                    (SELECT
                        conl.payment_schedule_line_number
                    FROM
                        con_payment_schedules conl
                    WHERE
                        conl.payment_schedule_line_id = v.contract_l_id
                    ) payment_schedule_line_number
                FROM
                    (SELECT
                        cprl.payment_requisition_header_id,
                        cprl.payment_requisition_line_id,
                        cprl.payment_requisition_line_type,
                        (SELECT
                            b.code_value_name
                        FROM
                            sys_codes_vl a,
                            sys_code_values_vl b
                        WHERE
                            a.code_id    = b.code_id AND
                            a.code       = 'PAYMENT_REQ_DOC_CATEGORY' AND
                            b.code_value = cprl.payment_requisition_line_type
                        ) p_payment_req_line_type,
                        (SELECT
                            e.description
                        FROM
                            csh_payment_methods_vl e
                        WHERE
                            e.payment_method_id=cprl.payment_method
                        ) payment_method_id_display,
                        (SELECT
                            e.payment_method_code
                        FROM
                            csh_payment_methods_vl e
                        WHERE
                            e.payment_method_id=cprl.payment_method
                        )payment_method_code,
                        cprl.payment_method payment_method_id,
                        cprl.amount,
                        cprl.description,
                        cprl.ref_document_id,
                        cprl.account_number,
                        DECODE( cprl.partner_category, 'EMPLOYEE', DECODE(cprl.account_number, NULL, '', SUBSTR(cprl.account_number, 0, 4)
                            || '***'
                            || SUBSTR(cprl.account_number, -4, 4)), cprl.account_number ) account_number_ext,
                        cprl.account_name,
                        cprl.bank_code,
                        cprl.bank_name,
                        cprl.bank_location_code,
                        cprl.bank_location_name,
                        cprl.province_code,
                        cprl.province_name,
                        cprl.city_code,
                        cprl.city_name,
                        (SELECT
                            erh.exp_requisition_number
                        FROM
                            exp_requisition_headers erh
                        WHERE
                            erh.exp_requisition_header_id =cprl.ref_document_id
                        ) ref_document_id_display,
                        DECODE(payment_requisition_line_type, 'EXP_REQUISITION',
                        (SELECT
                            NVL(SUM(erl.requisition_amount), 0)
                        FROM
                            exp_requisition_lines erl
                        WHERE
                            erl.exp_requisition_header_id = cprl.ref_document_id AND
                            erl.payment_flag              = 'Y'
                        ), NULL) requisition_need_pay_amount,
                        DECODE(cprl.payment_requisition_line_type, 'EXP_REQUISITION',
                        (SELECT
                            NVL(SUM(cprl1.amount), 0)
                        FROM
                            csh_payment_requisition_lns cprl1,
                            csh_payment_requisition_hds cprh
                        WHERE
                            cprl1.ref_document_id              = cprl.ref_document_id AND
                            cprh.payment_requisition_header_id = cprl1.payment_requisition_header_id AND
                            cprh.status NOT                   IN ('GENERATE' ,'REJECTED' ,'TAKEN_BACK' )
                        ), NULL) requisited_amount,
                        DECODE(cprl.payment_requisition_line_type, 'EXP_REQUISITION',
                        (SELECT
                            NVL(SUM(cprr.amount), 0)
                        FROM
                            csh_payment_requisition_lns cprl2,
                            csh_payment_requisition_refs cprr,
                            csh_transaction_lines ctl,
                            csh_transaction_headers cth
                        WHERE
                            cprl2.ref_document_id             = cprl.ref_document_id AND
                            cprl2.payment_requisition_line_id = cprr.payment_requisition_line_id AND
                            cprr.csh_transaction_line_id      = ctl.transaction_line_id AND
                            ctl.transaction_header_id         = cth.transaction_header_id AND
                            cth.posted_flag                   = 'Y'
                        ), NULL) requisited_payment_amount,
                        (SELECT
                            cdf.document_id
                        FROM
                            con_document_flows cdf
                        WHERE
                            cdf.document_type           = 'CON_CONTRACT' AND
                            cdf.source_document_type    = 'CSH_PAYMENT_REQUISITION_LNS' AND
                            cdf.source_document_id      = cprl.payment_requisition_header_id AND
                            cdf.source_document_line_id = cprl.payment_requisition_line_id
                        ) contract_header_id ,
                        (SELECT
                            cdf.document_line_id
                        FROM
                            con_document_flows cdf
                        WHERE
                            cdf.document_type           = 'CON_CONTRACT' AND
                            cdf.source_document_type    = 'CSH_PAYMENT_REQUISITION_LNS' AND
                            cdf.source_document_id      = cprl.payment_requisition_header_id AND
                            cdf.source_document_line_id = cprl.payment_requisition_line_id
                        ) contract_l_id,
                        (SELECT
                            name
                        FROM
                            (SELECT
                                cev.employee_id id,
                                cev.company_id,
                                cev.name
                                || '-'
                                || cev.employee_code name,
                                cev.employee_code,
                                'EMPLOYEE' partner_category
                            FROM
                                exp_company_employees_v cev
                            WHERE
                                cev.employee_enabled_flag = 'Y'
                            UNION
                            SELECT
                                svv.vender_id,
                                cv.company_id ,
                                svv.description
                                || '-'
                                || svv.vender_code,
                                svv.vender_code,
                                'VENDER' partner_category
                            FROM
                                pur_company_venders cv,
                                pur_system_venders_vl svv
                            WHERE
                                cv.vender_id    = svv.vender_id AND
                                cv.enabled_flag = 'Y'
                            UNION
                            SELECT
                                cv.customer_id,
                                cc.company_id,
                                cv.description
                                || '-'
                                || cv.customer_code,
                                cv.customer_code,
                                'CUSTOMER' partner_category
                            FROM
                                ord_company_customers cc,
                                ord_system_customers_vl cv
                            WHERE
                                cc.customer_id  = cv.customer_id AND
                                cc.enabled_flag = 'Y'
                            ) cat
                        WHERE
                            partner_category = cprl.partner_category AND
                            id               = cprl.partner_id AND
                            cprl.company_id  = company_id
                        ) p_partner_name,
                        cprl.company_id,
                        cprl.gather_flag,
                        (SELECT
                            b.code_value_name
                        FROM
                            sys_codes a,
                            sys_code_values_vl b
                        WHERE
                            a.code_id    = b.code_id AND
                            a.code       = 'GATHER_FLAG' AND
                            b.code_value = cprl.gather_flag
                        )gather_flag_desc,
                        cprl.partner_category,
                        (SELECT
                            v.code_value_name
                        FROM
                            sys_codes s ,
                            sys_code_values_vl v
                        WHERE
                            s.code       = 'PAYMENT_OBJECT' AND
                            s.code_id    = v.code_id AND
                            v.code_value = cprl.partner_category
                        ) AS partner_category_name,
                        cprl.partner_id,
                        cprl.csh_transaction_class_code,
                        (SELECT
                            ccf.description
                        FROM
                            csh_cash_flow_items_vl ccf
                        WHERE
                            ccf.cash_flow_item_id = cprl.cash_flow_code
                        ) cash_flow_item_description,
                        cprl.cash_flow_code,
                        (SELECT
                            a.description
                        FROM
                            csh_transaction_classes_vl a
                        WHERE
                            a.csh_transaction_type_code  = 'PREPAYMENT' AND
                            a.enabled_flag               = 'Y' AND
                            a.csh_transaction_class_code = cprl.csh_transaction_class_code
                        ) cls_des,
                        (SELECT
                            a.repay_flag
                        FROM
                            csh_transaction_classes a
                        WHERE
                            a.csh_transaction_type_code  = 'PREPAYMENT' AND
                            a.enabled_flag               = 'Y' AND
                            a.csh_transaction_class_code = cprl.csh_transaction_class_code
                        ) repay_flag,
                        cprl.repay_code,
                        DECODE(cprl.repay_code,'Y','收据已上缴','N','收据未上缴',NULL) repay_desc,
                        cprl.repay_status,
                        (SELECT
                            sc.code_value_name
                        FROM
                            sys_codes s,
                            sys_code_values_vl sc
                        WHERE
                            s.code_id     = sc.code_id AND
                            sc.code_value = cprl.repay_status AND
                            s.code        =  'RECEIPT_STATUS'
                        ) repay_status_desc,
                    TO_CHAR(cprl.plan_repayment_date,'yyyy-mm-dd') plan_repayment_date
                    FROM
                        csh_payment_requisition_lns cprl
                    ) v  WHERE PAYMENT_REQUISITION_HEADER_ID = ?
                ORDER BY
                    payment_requisition_line_id
            
---------------------Binding info---------------------
No.1	Access path:@payment_requisition_header_id	Data type of passed value :java.lang.String	Value:853	Output:false	Database Type:null	

=============== END [query] SQL Statement execution dump ============

2018-10-17 01:49:16.21 [uncertain.proc] [CONFIG] [action] CreateView
2018-10-17 01:49:16.21 [uncertain.proc] [CONFIG] [action] BuildOutputContent
2018-10-17 01:49:16.21 [aurora.presentation.buildsession] [CONFIG] Start build session
2018-10-17 01:49:16.21 [aurora.presentation.buildsession] [CONFIG] building view: <html-page> -> aurora.presentation.component.HtmlPage@4318ce90
2018-10-17 01:49:16.22 [aurora.presentation.buildsession] [CONFIG] building view: <link> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.22 [aurora.presentation.buildsession] [CONFIG] building view: <link> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.22 [aurora.presentation.buildsession] [CONFIG] building view: <link> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.22 [aurora.presentation.buildsession] [CONFIG] building view: <link> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.22 [aurora.presentation.buildsession] [CONFIG] building view: <link> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.22 [aurora.presentation.buildsession] [CONFIG] building view: <script> -> aurora.presentation.DefaultViewBuilder@35f5c5a3
2018-10-17 01:49:16.22 [aurora.presentation.buildsession] [CONFIG] building view: <dataSets> -> aurora.application.features.DataSetInit@5a601fa1
2018-10-17 01:49:16.23 [aurora.presentation.buildsession] [CONFIG] building view: <dataSet> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.23 [aurora.presentation.buildsession] [CONFIG] building view: <dataSet> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.23 [aurora.presentation.buildsession] [CONFIG] building view: <dataSet> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.23 [aurora.presentation.buildsession] [CONFIG] building view: <dataSet> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.23 [aurora.presentation.buildsession] [CONFIG] building view: <dataSet> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.25 [aurora.presentation.buildsession] [CONFIG] building view: <dataSet> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.26 [aurora.presentation.buildsession] [CONFIG] building view: <screenBody> -> aurora.presentation.component.std.ScreenBody@6a7790e1
2018-10-17 01:49:16.26 [aurora.presentation.buildsession] [CONFIG] building view: <screenTopToolbar> -> aurora.presentation.component.std.ScreenTopToolbar@329c0a31
2018-10-17 01:49:16.26 [aurora.presentation.buildsession] [CONFIG] building view: <screenTitle> -> aurora.presentation.component.std.ScreenTitle@37753ebc
2018-10-17 01:49:16.31 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2018-10-17 01:49:16.31 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2018-10-17 01:49:16.31 [uncertain.proc] [CONFIG] [action] CreatequeryStatement
2018-10-17 01:49:16.31 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onCreateQueryStatement
2018-10-17 01:49:16.31 [uncertain.proc] [CONFIG] [action] PopulatequeryStatement
2018-10-17 01:49:16.31 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateQueryStatement
2018-10-17 01:49:16.31 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateQueryStatement
2018-10-17 01:49:16.31 [uncertain.proc] [CONFIG] [action] CreatequerySql
2018-10-17 01:49:16.31 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onCreateQuerySql
2018-10-17 01:49:16.31 [uncertain.proc] [CONFIG] [action] ExecuteQuery
2018-10-17 01:49:16.31 [uncertain.proc] [FINE] aurora.bm.QuerySqlCreator.onExecuteQuery
2018-10-17 01:49:16.32 [uncertain.proc] [CONFIG] [action] QueryFinish
2018-10-17 01:49:16.32 [uncertain.proc] [FINE] aurora.database.features.AutoQueryCounter.onQueryFinish
2018-10-17 01:49:16.32 [uncertain.proc] [CONFIG] [action] FetchResultSet
2018-10-17 01:49:16.32 [uncertain.proc] [FINE] aurora.database.features.CacheBasedLookUpField.postFetchResultSet
2018-10-17 01:49:16.32 [aurora.database] [CONFIG] 
============= BEGIN [query] SQL Statement execution dump ============
SELECT f.service_id,f.service_name,f.is_entry_page,f.is_access_checked,f.is_login_required,f.is_system_access,? AS language,(select d.description_text from fnd_descriptions d where d.description_id = f.title_id and d.language = ?) AS title,f.title_id,f.weixin_flag
FROM sys_service f
WHERE f.service_name = ?
ORDER BY service_name
---------------------Binding info---------------------
No.1	Access path:/session/@lang	Data type of passed value :java.lang.String	Value:ZHS	Output:false	Database Type:null	
No.2	Access path:/session/@lang	Data type of passed value :java.lang.String	Value:ZHS	Output:false	Database Type:null	
No.3	Access path:@service_name	Data type of passed value :java.lang.String	Value:modules/csh/public/csh_pay_req_for_finance_detail_readonly.screen	Output:false	Database Type:null	

=============== END [query] SQL Statement execution dump ============

2018-10-17 01:49:16.32 [aurora.presentation.buildsession] [CONFIG] building view: <toolbarButton> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.32 [aurora.presentation.buildsession] [CONFIG] building view: <toolbarButton> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.32 [aurora.presentation.buildsession] [CONFIG] building view: <form> -> aurora.presentation.component.std.Form@221791da
2018-10-17 01:49:16.32 [aurora.presentation.buildsession] [CONFIG] building view: <box> -> aurora.presentation.component.std.Box@7d7ab188
2018-10-17 01:49:16.32 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.33 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.33 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.33 [aurora.presentation.buildsession] [CONFIG] building view: <numberField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.33 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.33 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.33 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.34 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.34 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.34 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.34 [aurora.presentation.buildsession] [CONFIG] building view: <textField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.34 [aurora.presentation.buildsession] [CONFIG] building view: <box> -> aurora.presentation.component.std.Box@398bf7ee
2018-10-17 01:49:16.34 [aurora.presentation.buildsession] [CONFIG] building view: <textArea> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.34 [aurora.presentation.buildsession] [CONFIG] building view: <grid> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.34 [aurora.presentation.buildsession] [CONFIG] building view: <navBar> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.36 [aurora.presentation.buildsession] [CONFIG] building view: <button> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.36 [aurora.presentation.buildsession] [CONFIG] building view: <button> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.37 [aurora.presentation.buildsession] [CONFIG] building view: <separator> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.37 [aurora.presentation.buildsession] [CONFIG] building view: <div> -> aurora.presentation.DefaultViewBuilder@35f5c5a3
2018-10-17 01:49:16.37 [aurora.presentation.buildsession] [CONFIG] building view: <numberField> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.37 [aurora.presentation.buildsession] [CONFIG] building view: <div> -> aurora.presentation.DefaultViewBuilder@35f5c5a3
2018-10-17 01:49:16.37 [aurora.presentation.buildsession] [CONFIG] building view: <separator> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.37 [aurora.presentation.buildsession] [CONFIG] building view: <button> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.37 [aurora.presentation.buildsession] [CONFIG] building view: <button> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.37 [aurora.presentation.buildsession] [CONFIG] building view: <button> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.38 [aurora.presentation.buildsession] [CONFIG] building view: <separator> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.38 [aurora.presentation.buildsession] [CONFIG] building view: <div> -> aurora.presentation.DefaultViewBuilder@35f5c5a3
2018-10-17 01:49:16.38 [aurora.presentation.buildsession] [CONFIG] building view: <comboBox> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.38 [aurora.presentation.buildsession] [CONFIG] building view: <div> -> aurora.presentation.DefaultViewBuilder@35f5c5a3
2018-10-17 01:49:16.38 [aurora.presentation.buildsession] [CONFIG] building view: <separator> -> aurora.presentation.TemplateBasedView@3dda489e
2018-10-17 01:49:16.38 [aurora.presentation.buildsession] [CONFIG] building view: <div> -> aurora.presentation.DefaultViewBuilder@35f5c5a3
2018-10-17 01:49:16.39 [aurora.presentation.buildsession] [CONFIG] building view: <script> -> aurora.presentation.DefaultViewBuilder@35f5c5a3
2018-10-17 01:49:16.39 [aurora.presentation.buildsession] [CONFIG] End build session
